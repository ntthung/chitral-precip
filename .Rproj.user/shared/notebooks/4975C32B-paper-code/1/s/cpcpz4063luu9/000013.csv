"0","# Read ARSTAN outputs"
"0","crnRaw <- lapplyrbind("
"0","  list.files('data/', '.tabs', full.names = TRUE),"
"0","  function(fn) {"
"0","    dt <- fread(fn)"
"0","    dt[, site := substr(fn, 6, nchar(fn) - 5)]"
"0","  })"
"0","setkey(crnRaw, site)"
"0","sssOut <- fread('data/sss.csv', key = 'site')"
"0","crn <- merge(crnRaw, sssOut, by = c('site', 'year'))"
"0",""
"0","firstYear <- crn[sss > 0.6][, .N, by = year][N >= 4, first(year)]"
"0","lastYear <- 2018"
"0","# Use the residual chronology"
"0","crnWide <- crn[year %in% firstYear:lastYear, dcast(.SD, year ~ site, value.var = c('res'))]"
